<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Pacman</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div class="wrapper">
            <div id="world"></div>
            <div id="pacman" style="top: 20px, left: 20px"></div>
            <div id="scoreboard">0</div>
            <script type="text/javascript">
            // var world = [
            // [2,2,2,2,2,2,2,2,2,2],
            // [2,1,1,1,1,1,1,1,1,2],
            // [2,1,1,1,1,1,1,1,1,2],
            // [2,1,1,1,1,1,1,1,1,2],
            // [2,1,1,1,1,1,1,1,1,2],
            // [2,1,1,1,1,1,1,1,1,2],
            // [2,1,1,1,1,1,1,1,1,2],
            // [2,1,1,1,1,1,1,1,1,2],
            // [2,1,1,1,1,1,1,1,1,2],
            // [2,2,2,2,2,2,2,2,2,2]
            // ];
            var world = [
                [2,2,2,2,2,2,2,2,2,0,2,0,2,2,2,2,2,2,2,2],
                [2,8,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,8,2],
                [2,1,2,2,2,1,2,2,1,2,2,1,2,2,1,2,2,2,1,2],
                [2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
                [2,1,2,1,2,1,2,2,2,2,2,2,1,2,2,2,1,2,1,2],
                [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
                [2,1,2,1,2,1,2,2,1,2,2,1,2,2,1,2,1,2,1,2],
                [2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
                [2,1,1,1,2,1,2,1,2,2,2,2,1,2,1,2,1,2,1,2],
                [2,1,2,1,2,1,1,1,2,0,0,2,1,1,1,2,1,1,1,2],
                [0,1,2,1,2,1,2,1,2,0,0,2,1,2,1,1,1,2,1,0],
                [2,1,1,1,2,1,2,1,0,0,5,2,1,2,1,2,1,2,1,2],
                [0,1,2,1,2,1,2,1,0,6,4,2,1,2,1,2,1,2,1,0],
                [2,1,2,1,2,1,2,1,0,0,3,2,1,2,1,1,1,2,1,2],
                [0,1,1,1,2,1,2,1,2,0,0,2,1,2,1,2,1,2,1,0],
                [2,1,2,1,1,1,1,1,2,0,0,2,1,1,1,2,1,1,1,2],
                [2,1,2,1,2,1,2,1,2,2,2,2,1,2,1,1,1,2,1,2],
                [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,2],
                [2,1,2,1,2,1,2,1,2,2,1,2,2,2,1,2,1,2,1,2],
                [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
                [2,1,2,1,2,2,2,1,2,2,2,2,1,2,1,2,1,2,1,2],
                [2,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,2],
                [2,1,2,2,2,1,2,2,2,1,2,2,2,2,1,2,2,2,1,2],
                [2,8,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,8,2],
                [2,2,2,2,2,2,2,2,2,0,2,0,2,2,2,2,2,2,2,2]
            ];

                var pacman = {
                    x: 0,
                    y: 0
                };

                function displayWorld(){
                    var output = '';
                    output += '<div class="board">';
                    for (var i = 0; i < world.length; i++) {
                        output += '<div class="row">\n';
                        for (var j = 0; j < world[i].length; j++) {
                            if (world[i][j] == 8) {
                                output += '<div class="power"></div>';
                            }
                            else if (world[i][j] == 7) {
                                output += '<div class="pacman"></div>';
                            }
                            if (world[i][j] == 6) {
                                output += '<div class="pinky"></div>';
                            }
                            else if (world[i][j] == 5) {
                                output += '<div class="inky"></div>';
                            }
                            if (world[i][j] == 4) {
                                output += '<div class="clyde"></div>';
                            }
                            else if (world[i][j] == 3) {
                                output += '<div class="redy"></div>';
                            }
                            if (world[i][j] == 2) {
                                output += '<div class="brick"></div>';
                            }
                            else if (world[i][j] == 1) {
                                output += '<div class="coin"></div>';
                            }
                            if (world[i][j] == 0) {
                                output += '<div class="empty"></div>';
                            }
                        }
                        output += '</div>';
                    }
                    output += '</div>';
                    document.getElementById('world').innerHTML = output;
                }
                function displayPacman(){
                    document.getElementById('pacman').style.top = pacman.y*20 + 'px';
                    document.getElementById('pacman').style.left = pacman.x*20 + 'px';
                }
                displayWorld();
                displayPacman();

                document.onkeydown = function (e) {
                    var code = (e.keyCode ? e.keyCode : e.which);
                    if( code === 37){
                        pacman.x -= 20;
                        console.log('pacman.x37left:' + pacman.x);
                    }
                    if( code === 39){
                        pacman.x += 20;
                        console.log('pacman.x:39right:' + pacman.x);
                    }
                    if( code === 38){
                        pacman.y -= 20;
                        console.log('pacman.y38up:' + pacman.y);
                    }
                    if( code === 40){
                        pacman.y += 20;
                        console.log('pacman.y40down:' + pacman.y);
                    }

                    if ( world[pacman.x][pacman.y] === 1 ) {
                        world[pacman.x][pacman.y] = 0;
                        console.log('gobble' + world[pacman.x][pacman.y]);
                        displayWorld();
                        displayPacman();
                    }
                    displayWorld();
                    displayPacman();
                };
            </script>
        </div>
    </body>
</html>
